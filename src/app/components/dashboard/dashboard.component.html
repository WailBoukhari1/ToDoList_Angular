<div class="dashboard-container">
  <!-- Header -->
  <mat-card class="header-card">
    <mat-card-header>
      <mat-card-title>Dashboard</mat-card-title>
      <mat-card-subtitle>Overview of your tasks and categories</mat-card-subtitle>
    </mat-card-header>
  </mat-card>

  <!-- Stats Grid -->
  <div class="stats-grid">
    <!-- Total Tasks -->
    <mat-card>
      <mat-card-content>
        <div class="stat-content">
          <div class="stat-icon blue">
            <mat-icon>assignment</mat-icon>
          </div>
          <div class="stat-info">
            <h3>Total Tasks</h3>
            <p class="stat-value">{{ (tasks$ | async)?.length || 0 }}</p>
          </div>
        </div>
      </mat-card-content>
    </mat-card>

    <!-- Categories -->
    <mat-card>
      <mat-card-content>
        <div class="stat-content">
          <div class="stat-icon green">
            <mat-icon>folder</mat-icon>
          </div>
          <div class="stat-info">
            <h3>Categories</h3>
            <p class="stat-value">{{ (categories$ | async)?.length || 0 }}</p>
          </div>
        </div>
      </mat-card-content>
    </mat-card>

    <!-- Pending Tasks -->
    <mat-card>
      <mat-card-content>
        <div class="stat-content">
          <div class="stat-icon amber">
            <mat-icon>pending</mat-icon>
          </div>
          <div class="stat-info">
            <h3>Pending</h3>
            <p class="stat-value">{{ pendingTasks }}</p>
          </div>
        </div>
      </mat-card-content>
    </mat-card>

    <!-- Completed Tasks -->
    <mat-card>
      <mat-card-content>
        <div class="stat-content">
          <div class="stat-icon purple">
            <mat-icon>check_circle</mat-icon>
          </div>
          <div class="stat-info">
            <h3>Completed</h3>
            <p class="stat-value">{{ completedTasks }}</p>
          </div>
        </div>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- Main Content Grid -->
  <div class="main-content">
    <!-- Recent Activity -->
    <mat-card class="activity-card">
      <mat-card-header>
        <mat-card-title>Recent Activity</mat-card-title>
        <mat-card-subtitle>Latest updates from your tasks and categories</mat-card-subtitle>
      </mat-card-header>
      <mat-card-content>
        <mat-list>
          @for (category of categories$ | async; track category.id) {
            <mat-list-item>
              <div class="activity-item">
                <div class="activity-avatar">
                  {{ category.name[0] }}
                </div>
                <div class="activity-details">
                  <h4>{{ category.name }}</h4>
                  <p>Created on {{ category.createdAt | date:'medium' }}</p>
                </div>
                <!-- <mat-chip-list>
                  <mat-chip color="primary" selected>Active</mat-chip>
                </mat-chip-list> -->
              </div>
            </mat-list-item>
            <mat-divider></mat-divider>
          }
        </mat-list>
        @if ((categories$ | async)?.length === 0) {
          <div class="empty-state">
            <mat-icon>info</mat-icon>
            <p>No recent activity to display</p>
          </div>
        }
      </mat-card-content>
    </mat-card>

    <!-- Quick Actions -->
    <div class="actions-container">
      <mat-card class="actions-card">
        <mat-card-header>
          <mat-card-title>Quick Actions</mat-card-title>
          <mat-card-subtitle>Frequently used actions</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <div class="action-buttons">
            <button mat-raised-button color="primary" routerLink="/tasks/new">
              <mat-icon>add</mat-icon>
              Create New Task
            </button>
            <button mat-stroked-button color="primary" routerLink="/categories">
              <mat-icon>folder_open</mat-icon>
              Manage Categories
            </button>
          </div>
        </mat-card-content>
      </mat-card>

      <!-- Summary -->
      <mat-card class="summary-card">
        <mat-card-header>
          <mat-card-title>Summary</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <mat-list>
            <mat-list-item>
              <span>Total Categories</span>
              <span class="spacer"></span>
              <strong>{{ (categories$ | async)?.length || 0 }}</strong>
            </mat-list-item>
            <mat-divider></mat-divider>
            <mat-list-item>
              <span>Last Updated</span>
              <span class="spacer"></span>
              <!-- <strong>
                {{ (categories$ | async) && (categories$ | async)?.length > 0 ? 
                   ((categories$ | async)![0]?.updatedAt | date:'shortDate') : 'Never' }}
              </strong> -->
            </mat-list-item>
          </mat-list>
        </mat-card-content>
      </mat-card>
    </div>
  </div>
</div>